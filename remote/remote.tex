%-----------------------------------------------------------------------------
\section{Fundamentals}

Definitions: The \emph{local} computer is the one you are working on and from
which you connect. The \emph{remote} computer is the one you connect to, over a
network.

\subsection{I want to connect to a remote computer}

You will use the \lstinline{ssh} program (``secure shell'') to connect to a
remote computer. The most straightforward way is to run the command

\begin{lstlisting}
ssh username@address.of.remote.computer
\end{lstlisting}

The program will then ask for your remote password and open a shell on the
remote computer. The address could be a hostname such as
\cmd{server.youruniversity.edu}, or it could be an IP address such as
198.192.10.1. You can leave out the username if the remote username is the same
as the local username.

\subsection{I want make it easier to connect to a remote computer that I use a
lot}

Typing the whole \cmd{ssh} command with the address and username every time is
tedious. There is a very simple way to expedite this.

In your home directory there will be a directory called \cmd{.ssh}. This
directory may contain a file called \cmd{config}, which can be used (among
other things) to set up shorter aliases for connections you use a lot. If this
file does not exist, you can create it.

Let's say your username is \cmd{galileo} and you need to connect to a remote
machine called \cmd{lab.galilei.edu}. You can put the following in your
\cmd{.ssh/config} file:

\begin{lstlisting}
Host lab
    HostName lab.galilei.edu
    User galileo
\end{lstlisting}

On the first line \cmd{lab} is an alias, which you can choose yourself. With
this setup done, typing \cmd{ssh lab} is equivalent to typing \cmd{ssh
galileo@lab.galilei.edu}.

\subsection{I want to transfer a file to/from a remote computer}

The command to do this is \cmd{scp}, short for ``secure copy''. It works very
much like regular \cmd{cp}, except you can add an identifier for a remote
computer to the file paths, separated by a colon. This identifier can either be
a full \cmd{username@address} specification or an alias defined in
\cmd{.ssh/config}. Like \cmd{ssh}, \cmd{scp} will ask for your remote password.
With the above definitions, these two commands both copy the file
\cmd{test.txt} from the home directory on the remote computer to the local
working directory:

\begin{lstlisting}
scp galileo@lab.galilei.edu:test.txt .
scp lab:test.txt .
\end{lstlisting}

Copying a local file to the remote works in a similar way. To copy
\cmd{example.png} from the local working directory to the \cmd{\~/public_html}
directory on the remote, you can write

\begin{lstlisting}
scp example.png lab:public_html/
\end{lstlisting}

\section{SSH keys}

\subsection{I want to stop \cmd{ssh} asking for my password all the time}


\section{Keeping jobs going}

\subsection{I want to start a job up on a remote computer and make sure it
keeps running even if I am disconnected}

\cmd{nohup} is your friend here. If you start you job with \cmd{nohup}, then
even if you close the terminal window, kill your \cmd{ssh} session, etc., it
will keep running. Note that you should redirect the output (including
\cmd{stderr})

\begin{lstlisting}
nohup myjob &> out &
\end{lstlisting}

For some commands, especially those run with MPI, you also want to redirect
input, such as:

\begin{lstlisting}
nohup mpiexec -n 4 ./myjob &> out < /dev/null &
\end{lstlisting}

\subsection{I want to be able to reconnect to a job that was running in a
terminal that got disconnected}

GNU screen is the solution---this sets up a special terminal session that can
be detacted from your terminal (i.e., you can logout, close the window, etc.),
and then restore the session when you log back in. For \cmd{screen}, commands
are entered by first typing \cmd{^-a}, where \cmd{^} is the control key.

\section{Advanced ssh tricks}

\subsection{I want to get an ssh connection through a gateway server into a
private network (ssh tunnels)}

\subsection{I want to mount a remote directory onto the local filesystem over
ssh}
